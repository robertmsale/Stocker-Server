"use strict";var Vt=Object.create;var X=Object.defineProperty;var Dt=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var Bt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var Lt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Nt(t))!Et.call(e,o)&&o!==n&&X(e,o,{get:()=>t[o],enumerable:!(r=Dt(t,o))||r.enumerable});return e};var i=(e,t,n)=>(n=e!=null?Vt(Bt(e)):{},zt(t||!e||!e.__esModule?X(n,"default",{value:e,enumerable:!0}):n,e));var p=Lt(u=>{"use strict";var v=u&&u.__assign||function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},v.apply(this,arguments)},Wt=u&&u.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],f;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(f)throw f.error}}return a},Gt=u&&u.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wt(arguments[t]));return e};Object.defineProperty(u,"__esModule",{value:!0});u.depend=void 0;var Jt=function(e,t){var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.apply(void 0,Gt([e],r))};return n.inject=function(r){return typeof r=="function"?u.depend(v(v({},e),r(e)),t):u.depend(v(v({},e),r),t)},n};u.depend=Jt});var gt=i(require("path")),wt=i(require("fastify")),At=i(require("@fastify/helmet")),Ut=i(require("@fastify/cors")),L=i(require("@fastify/static"));var Y=i(require("dotenv"));Y.default.config();var q=process.env.API_JWT_SECRET??"",an=process.env.API_USER_ID??"",dn=process.env.API_USER_PASS??"",ee=+(process.env.API_SERVER_PORT??"8080"),te=process.env.API_BASE_PATH??"",m=process.env.API_ORIGIN??"",c=process.env.API_UPLOAD_DIR??"",fn=process.env.API_REDIS_URL??"";var Rt=i(require("@fastify/multipart"));var ne=i(p());function re(e,t){return t&&typeof e!="function"?(0,ne.depend)(e,t):e}var P=i(require("jsonwebtoken"));var I=class{static verify(t){return P.default.verify(t,q)}static decode(t){return{id:-1}}static sign(t){return new Promise((n,r)=>{P.default.sign(t,q,(o,a)=>{o?r(o):n(a||"")})})}};var oe=require("@prisma/client"),Qt=new oe.PrismaClient,s=Qt;var se=re(()=>({preHandler:async(e,t)=>{let n=I.verify(e.headers.authorization),r=await s.user.findFirst({where:{id:n.id},include:{roles:!0}});if(!r){t.status(401).send({message:"Invalid token"});return}let o=r.roles.some(a=>a.id===1);if(r.active===!1&&!o){t.status(401).send({message:"User is not active"});return}e.user=r}}));var ie=i(p());function ae(e,t){return t&&typeof e!="function"?(0,ie.depend)(e,t):e}var de=ae(()=>({onRequest:async(e,t,n)=>{}}));var O=require("zod");var fe=i(p());function pe(e,t){return t&&typeof e!="function"?(0,fe.depend)(e,t):e}var ce=()=>({params:O.z.object({articleId:O.z.number()})});var ye=i(p());function me(e,t){return t&&typeof e!="function"?(0,ye.depend)(e,t):e}var ue=me(()=>({get:()=>({status:200,body:"Hello, world!"})}));var le=[{id:1,title:"First article",body:"Hello from frourio!"},{id:2,title:"Create Frourio App",body:`From installation
         To deployment

   In  One  Command`},{id:3,title:"TypeScript full stack framework",body:"All you need is TypeScript"},{id:4,title:"What databases are suported?",body:`- SQLite (prisma only for now)
- PostgreSQL
- MySQL
Planning to support others... stay tuned!`}],he=e=>le.filter(n=>!e||e.toLowerCase().split(/\s+/).every(r=>(n.title+n.body).replace(/\s/g,"").toLowerCase().search(r.toLowerCase())>=0)),Te=e=>le.find(t=>t.id===e);var Ie=i(p());function Se(e,t){return t&&typeof e!="function"?(0,Ie.depend)(e,t):e}var xe=Se(()=>({get:({query:e})=>({status:200,body:he(e==null?void 0:e.search)})}));var Me=pe(()=>({get:({params:{articleId:e}})=>(t=>t?{status:200,body:t}:{status:404})(Te(e))}));var ve=i(p());function He(e,t){return t&&typeof e!="function"?(0,ve.depend)(e,t):e}var ke=He(()=>({get:async()=>({status:200,body:{baseURL:m,itemImages:"/uploads/item-images/",profileImages:"/uploads/profile-images/",dummy:"/static/icons/dummy.svg"}})}));var Re=i(p());function Fe(e,t){return t&&typeof e!="function"?(0,Re.depend)(e,t):e}var Ue=i(require("lodash"));var C=i(require("bcrypt")),we=require("@prisma/client"),Ae=i(require("lodash")),ge=new we.PrismaClient,Zt=10;var M={hashAndStore:async(e,t)=>{let n=await C.default.hash(t,Zt);await ge.user.update({where:{id:e},data:{password:n}})},compare:async(e,t)=>{let n=await ge.user.findFirst({where:{id:e},select:{password:!0}});return Ae.default.isNull(n)?2:await C.default.compare(t,n.password)?0:1}};var be=Fe(e=>({post:async t=>{console.log(t);let n=await s.user.findFirst({where:{username:t.body.username}});if(Ue.default.isNull(n))return{status:404};switch(await M.compare(n.id,t.body.password)){case 0:return{status:200,body:{user:n,token:await I.sign({id:n.id})}};case 1:return{status:401};case 2:return{status:404}}}}));var qe=i(p());function Pe(e,t){return t&&typeof e!="function"?(0,qe.depend)(e,t):e}var w=i(require("lodash"));var Oe=Pe(()=>({get:async({query:e})=>{if(w.default.isUndefined(e.id)){let n=await s.userRole.findMany();return{status:200,body:w.default.isNull(n)?[]:n}}let t=await s.userRole.findFirst({where:{id:e.id}});return{status:200,body:w.default.isNull(t)?[]:[t]}},post:async({body:e})=>({status:201,body:await s.userRole.create({data:e})})}));var Ce=i(p());function $e(e,t){return t&&typeof e!="function"?(0,Ce.depend)(e,t):e}var S=i(require("lodash"));var je=$e(()=>({get:async({query:e})=>{let t={id:S.default.toNumber(e.id)};console.log(t);let n=await s.user.findFirst({where:t,include:{roles:!0}});return{status:200,body:S.default.omit(n,"password")}},post:async({body:e})=>{console.log(e);let t=await s.user.create({data:{email:e.email,username:e.username,password:"",active:e.active,roles:{connect:S.default.isUndefined(e.roles)?[]:e.roles.map(n=>({id:n.id}))},imageURL:e.imageURL}});return await M.hashAndStore(t.id,e.password),{status:200,body:S.default.omit(t,"password")}},patch:async({body:e})=>{let t=await s.user.update({where:{id:e.id},data:{email:e.email,username:e.username,active:e.active,roles:{connect:S.default.isUndefined(e.roles)?[]:e.roles.map(n=>({id:n.id}))},imageURL:e.imageURL}});return S.default.isUndefined(e.password)||await M.hashAndStore(t.id,e.password),{status:200,body:S.default.omit(t,"password")}}}));var _e=i(p());function Ke(e,t){return t&&typeof e!="function"?(0,_e.depend)(e,t):e}var $=i(require("lodash"));var j=i(require("path")),Ve=require("uuid");var De=i(require("jimp")),Ne=Ke(()=>({get:async({query:e})=>{let t=await s.user.findFirst({where:{id:e.id},select:{imageURL:!0}});return $.default.isNull(t)?{status:404}:{status:200,body:t.imageURL}},post:async({query:e,body:t,user:n})=>{let r=await s.user.findFirst({where:{id:e.id}});if($.default.isNull(r))return{status:404};let o=`${(0,Ve.v1)()}${j.default.extname(t.icon.filename)}`,a=j.default.resolve(c,"profile-images",o);return De.default.read(await t.icon.toBuffer()).then(f=>{f.scaleToFit(128,128),f.writeAsync(a)}),s.events.create({data:{description:`User ${n.username} changed profile image for ${r.username}`,time:new Date,userid:n.id}}),await s.user.update({where:{id:e.id},data:{imageURL:o}}),{status:200,body:o}}}));var Be=i(p());function Ee(e,t){return t&&typeof e!="function"?(0,Be.depend)(e,t):e}var _=i(require("lodash")),Le=Ee(()=>({get:async({query:e})=>{if(_.default.isUndefined(e.id))return{status:200,body:await s.warehouse.findMany()};let t=await s.warehouse.findFirst({where:{id:e.id}});return _.default.isNull(t)?{status:404}:{status:200,body:[t]}},post:async({body:e,user:t})=>({status:200,body:await s.warehouse.create({data:e}).then(r=>(s.events.create({data:{description:`${t.username} created a new warehouse: ${r.name}`,time:new Date,userid:t.id}}),r))}),patch:async({body:e,user:t})=>({status:200,body:await s.warehouse.update({where:{id:e.id},data:e}).then(r=>(s.events.create({data:{description:`${t.username} updated warehouse info: ${r.name}`,time:new Date,userid:t.id}}),r))}),delete:async({query:e,user:t})=>(await s.warehouse.delete({where:{id:e.id}}).then(n=>(s.events.create({data:{description:`${t.username} deleted warehouse: ${n.name}`,time:new Date,userid:t.id}}),n)),{status:200})}));var ze=i(p());function We(e,t){return t&&typeof e!="function"?(0,ze.depend)(e,t):e}var Ge=We(()=>({get:async()=>({status:200,body:await s.events.findMany()})}));var Je=i(p());function Qe(e,t){return t&&typeof e!="function"?(0,Je.depend)(e,t):e}var Ze=i(require("lodash"));var Xe=Qe(()=>({get:async({query:e,body:t})=>({status:200,body:await s.inventoryItem.findMany(t)}),post:async({body:e,user:t})=>{let n=await s.inventoryItem.create({data:e}),r=await s.inventoryItemData.findFirst({where:{id:n.dataId}});return await s.events.create({data:{description:`${t.username} scanned in a new item: ${(r==null?void 0:r.name)??""}`,time:new Date,userid:0}}),{status:200,body:n}},patch:async({body:e,user:t})=>{let n=await s.inventoryItem.update({data:Ze.default.omit(e,"id"),where:{id:e.id}}),r=await s.inventoryItemData.findFirst({where:{id:n.dataId}});return await s.events.create({data:{description:`${t.username} updated an item's information: ${(r==null?void 0:r.name)??""}`,time:new Date,userid:0}}),{status:200,body:n}},delete:async({body:e,user:t})=>{for(let n of e){let r=await s.inventoryItem.findFirst({where:{id:n}}),o=await s.inventoryItemData.findFirst({where:{id:(r==null?void 0:r.dataId)??0}});await s.events.create({data:{description:`${t.username} scanned an item out of stock: ${(o==null?void 0:o.name)??""}`,time:new Date,userid:0}})}return await s.inventoryItem.deleteMany({where:{id:{in:e}}}),{status:200,body:{status:"ok"}}}}));var Ye=i(p());function et(e,t){return t&&typeof e!="function"?(0,Ye.depend)(e,t):e}var y=i(require("lodash")),tt=et(()=>({get:async({query:e})=>{let t=y.default.omitBy(e,(r,o)=>o=="select"||o=="limit"||y.default.isUndefined(r));return console.log(t),{status:200,body:await s.inventoryItemData.findMany({where:{id:y.default.isUndefined(t.id)?void 0:y.default.toNumber(t.id),name:y.default.isUndefined(t.name)?void 0:{contains:y.default.toString(t.name)},description:y.default.isUndefined(t.description)?void 0:{contains:y.default.toString(t.description)},cost:y.default.isUndefined(t.cost)?void 0:y.default.toNumber(t.cost),active:y.default.isUndefined(t.active)?void 0:t.active=="true"}})}},post:async({body:e,user:t})=>{let n=await s.inventoryItemData.create({data:e});return await s.events.create({data:{description:`${t.username} created a new item data record: ${n.name}`,time:new Date,userid:0}}),{status:200,body:n}},patch:async({body:e,user:t})=>{let n=await s.inventoryItemData.findFirst({where:{id:e.id}}),r=await s.inventoryItemData.update({data:y.default.omit(e,"id"),where:{id:e.id}});return await s.events.create({data:{description:`${t.username} updated a new item data record: ${(n==null?void 0:n.name)??""} -> ${r.name}`,time:new Date,userid:0}}),{status:200,body:r}}}));var nt=i(p());function rt(e,t){return t&&typeof e!="function"?(0,nt.depend)(e,t):e}var st=i(require("fs-jetpack"));var H=i(require("lodash"));var A=i(require("path")),it=require("uuid"),at=i(require("jimp")),K=`${m}/static/icons/dummy.svg`,ot=e=>`${m}/upload/item-images/${e}`,Xt=e=>A.default.resolve(c,"item-images",e),dt=rt(()=>({get:async({query:e})=>{if(H.default.isUndefined(e))return{status:200,body:K};let t=await s.inventoryItemData.findFirst({where:{id:e.id}});if(H.default.isNull(t))return{status:200,body:K};let n=Xt(t.imageURL);return st.default.exists(n)?{status:200,body:ot(t.imageURL)}:{status:200,body:K}},post:async({body:e,query:t,user:n})=>{let r=`${(0,it.v1)()}${A.default.extname(e.icon.filename)}`,o=`${c}/item-images/${r}`;if(at.default.read(await e.icon.toBuffer()).then(a=>{a.scaleToFit(128,128),a.writeAsync(o)}),!H.default.isUndefined(t)&&!H.default.isUndefined(t.id)){let a=await s.inventoryItemData.update({where:{id:t.id},data:{imageURL:r}});s.events.create({data:{description:`User ${n.username} changed item image for ${a.name}`,time:new Date,userid:n.id}})}return{status:200,body:ot(A.default.basename(r))}}}));var ft=i(p());function pt(e,t){return t&&typeof e!="function"?(0,ft.depend)(e,t):e}var ct=i(require("lodash")),Yt=`${m}/static/icons/dummy.svg`,en=e=>`${m}/upload/item-images/${e}`,yt=pt(()=>({get:async({query:e})=>ct.default.isUndefined(e.fileName)?{status:200,body:Yt}:{status:200,body:en(e.fileName)}}));var mt=i(p());function ut(e,t){return t&&typeof e!="function"?(0,mt.depend)(e,t):e}var k=i(require("lodash"));var Dr=`${m}/static/icons/dummy.svg`;var lt=ut(()=>({get:async e=>{if(k.default.isUndefined(e.query.id))return{status:200,body:(await s.user.findMany()).map(r=>k.default.omit(r,"password"))};let t=await s.user.findFirst({where:{id:e.query.id},select:{password:!1}});return k.default.isNull(t)?{status:404}:{status:200,body:[k.default.omit(t,"password")]}}}));var ht=i(p());function Tt(e,t){return t&&typeof e!="function"?(0,ht.depend)(e,t):e}var tn={baseURL:m,dummy:"/static/icons/dummy.svg",profileImages:"/uploads/profile-images/",itemImages:"/uploads/item-images/"},R=tn;var V=i(require("lodash"));var It=require("uuid"),St=i(require("path"));var xt=i(require("fs-jetpack")),Mt=Tt(()=>({get:async e=>{if(V.default.isUndefined(e.query))return{status:200,body:`${R.baseURL}${R.profileImages}${e.user.imageURL}`};let t=await s.user.findFirst({where:{id:e.query.id}});return V.default.isNull(t)?{status:404}:{status:200,body:`${R.baseURL}${R.profileImages}${t.imageURL}`}},post:async e=>{let{icon:t}=e.body,n=`${(0,It.v1)()}${St.default.extname(t.filename)}`,r=`${c}/${n}`;return await xt.default.writeAsync(r,await t.toBuffer()),await s.user.update({where:{id:e.user.id},data:{imageURL:r}}),{status:200,body:n}}}));var vt=i(p());function Ht(e,t){return t&&typeof e!="function"?(0,vt.depend)(e,t):e}var D=i(require("lodash"));var kt=Ht(()=>({get:async e=>{let{id:t}=I.verify(e.headers.authorization),n=await s.user.findFirst({where:{id:t}});return D.default.isNull(n)?{status:404}:{status:200,body:D.default.omit(n,"password")}}}));var h=e=>(t,n,r)=>{let o=t.query;for(let[a,f,l]of e){let T=l?o[`${a}[]`]??o[a]:o[a];if(l){if(!f&&T===void 0)o[a]=[];else if(!f||T!==void 0){let x=(Array.isArray(T)?T:[T]).map(Number);if(x.some(isNaN)){n.code(400).send();return}o[a]=x}delete o[`${a}[]`]}else if(!f||T!==void 0){let x=Number(T);if(isNaN(x)){n.code(400).send();return}o[a]=x}}r()},N=e=>(t,n,r)=>Object.keys(t.query).length?e(t,n,r):r(),nn=e=>(t,n,r)=>{let o=t.params;for(let a of e){let f=Number(o[a]);if(isNaN(f)){n.code(400).send();return}o[a]=f}r()},B=e=>(t,n,r)=>{let o=t.body;for(let[a]of e)o[a]===void 0?o[a]=[]:Array.isArray(o[a])||(o[a]=[o[a]]);Object.entries(o).forEach(([a,f])=>{Array.isArray(f)?o[a]=f.map(l=>"file"in l?l:l.value):o[a]="file"in f?f:f.value});for(let[a,f]of e)!o[a].length&&f&&delete o[a];r()},rn=({schema:e})=>t=>{let n=e.safeParse(t);return n.success?{value:n.data}:{error:n.error}},E=e=>(t,n)=>{let r=e(t);r.headers&&n.headers(r.headers),n.code(r.status).send(r.body)},d=e=>async(t,n)=>{let r=await e(t);r.headers&&n.headers(r.headers),n.code(r.status).send(r.body)},Ft=(e,t={})=>{let n=t.basePath??"",r=se(e),o=de(e),a=ce(e),f=ue(e),l=xe(e),T=Me(e),x=ke(e),Ct=be(e),G=Oe(e),U=je(e),J=Ne(e),F=Le(e),$t=Ge(e),g=Xe(e),b=tt(e),Q=dt(e),jt=yt(e),_t=lt(e),Z=Mt(e),Kt=kt(e);return e.register(Rt.default,{attachFieldsToBody:!0,limits:{fileSize:1024**3},...t.multipart}),e.get(n||"/",E(f.get)),e.get(`${n}/article`,E(l.get)),e.get(`${n}/article/:articleId`,{schema:{params:a.params},validatorCompiler:rn,preValidation:nn(["articleId"])},E(T.get)),e.get(`${n}/dirs`,d(x.get)),e.post(`${n}/login`,d(Ct.post)),e.get(`${n}/protected/admin/roles`,{onRequest:o.onRequest,preValidation:h([["id",!0,!1]]),preHandler:r.preHandler},d(G.get)),e.post(`${n}/protected/admin/roles`,{onRequest:o.onRequest,preHandler:r.preHandler},d(G.post)),e.get(`${n}/protected/admin/user`,{onRequest:o.onRequest,preValidation:h([["id",!1,!1]]),preHandler:r.preHandler},d(U.get)),e.post(`${n}/protected/admin/user`,{onRequest:o.onRequest,preHandler:r.preHandler},d(U.post)),e.patch(`${n}/protected/admin/user`,{onRequest:o.onRequest,preHandler:r.preHandler},d(U.patch)),e.get(`${n}/protected/admin/user/img`,{onRequest:o.onRequest,preValidation:h([["id",!1,!1]]),preHandler:r.preHandler},d(J.get)),e.post(`${n}/protected/admin/user/img`,{onRequest:o.onRequest,preValidation:[h([["id",!1,!1]]),B([])],preHandler:r.preHandler},d(J.post)),e.get(`${n}/protected/admin/warehouse`,{onRequest:o.onRequest,preValidation:h([["id",!0,!1]]),preHandler:r.preHandler},d(F.get)),e.post(`${n}/protected/admin/warehouse`,{onRequest:o.onRequest,preHandler:r.preHandler},d(F.post)),e.patch(`${n}/protected/admin/warehouse`,{onRequest:o.onRequest,preHandler:r.preHandler},d(F.patch)),e.delete(`${n}/protected/admin/warehouse`,{onRequest:o.onRequest,preValidation:h([["id",!1,!1]]),preHandler:r.preHandler},d(F.delete)),e.get(`${n}/protected/events`,{preHandler:r.preHandler},d($t.get)),e.get(`${n}/protected/inventory-item`,{preHandler:r.preHandler},d(g.get)),e.post(`${n}/protected/inventory-item`,{preHandler:r.preHandler},d(g.post)),e.patch(`${n}/protected/inventory-item`,{preHandler:r.preHandler},d(g.patch)),e.delete(`${n}/protected/inventory-item`,{preHandler:r.preHandler},d(g.delete)),e.get(`${n}/protected/inventory-item/data`,{preHandler:r.preHandler},d(b.get)),e.post(`${n}/protected/inventory-item/data`,{preHandler:r.preHandler},d(b.post)),e.patch(`${n}/protected/inventory-item/data`,{preHandler:r.preHandler},d(b.patch)),e.get(`${n}/protected/inventory-item/data/image`,{preValidation:N(h([["id",!1,!1]])),preHandler:r.preHandler},d(Q.get)),e.post(`${n}/protected/inventory-item/data/image`,{preValidation:[N(h([["id",!1,!1]])),B([])],preHandler:r.preHandler},d(Q.post)),e.get(`${n}/protected/inventory-item/data/imgurl`,{preHandler:r.preHandler},d(jt.get)),e.get(`${n}/protected/user`,{preValidation:h([["id",!0,!1]]),preHandler:r.preHandler},d(_t.get)),e.get(`${n}/protected/user/img`,{preValidation:N(h([["id",!1,!1]])),preHandler:r.preHandler},d(Z.get)),e.post(`${n}/protected/user/img`,{preValidation:B([]),preHandler:r.preHandler},d(Z.post)),e.get(`${n}/try-login`,d(Kt.get)),e};var bt=i(require("@fastify/websocket"));var qt=require("@prisma/client"),z=i(require("lodash")),W=i(require("fs")),Pt=i(require("process")),on=async()=>{let e=new qt.PrismaClient,t=await e.userRole.upsert({where:{id:1},update:{},create:{value:"Administrator"}}),n=await e.userRole.upsert({where:{id:2},update:{},create:{value:"Default User"}}),r=await e.user.findFirst({where:{id:1}});z.default.isNull(r)&&(r=await e.user.create({data:{email:"",username:"admin",password:"",active:!0,roles:{connect:[{id:t.id}]},imageURL:""}})),await M.hashAndStore(r.id,"admin");let o=await e.warehouse.findFirst({where:{id:1}});z.default.isNull(o)&&await e.warehouse.create({data:{address:"1 Apple Park Way, Cupertino, CA 95014",name:"Default Warehouse"}})},Ot=e=>{on();let t=(0,wt.default)({serverFactory:e});if(t.register(At.default,{crossOriginResourcePolicy:{policy:"cross-origin"},permittedCrossDomainPolicies:{permittedPolicies:"all"},contentSecurityPolicy:!0,referrerPolicy:!0,crossOriginEmbedderPolicy:!0,crossOriginOpenerPolicy:!0,global:!0}),t.register(Ut.default,{origin:!0,strictPreflight:!1,preflightContinue:!0,credentials:!0}),t.register(bt.default),t.register(L.default,{root:gt.default.join(__dirname,"static"),prefix:"/static/"}),c){try{W.default.existsSync(c)||W.default.mkdirSync(c,{recursive:!0})}catch{console.error("Could not create upload directory. Exiting..."),Pt.exit(1)}t.after(()=>{t.register(L.default,{root:c,prefix:"/uploads/",decorateReply:!1})})}return Ft(t,{basePath:te}),t};Ot().listen({port:ee,host:"0.0.0.0"}).then(()=>{var e;(e=process.send)==null||e.call(process,"ready")});
